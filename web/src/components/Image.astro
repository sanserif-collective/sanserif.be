---
import type { AstroBuiltinAttributes } from 'astro'

type Props = {
  width: number
  height: number
  as?: string
  src?: string
  alt?: string
  class?: string
  'class:list'?: AstroBuiltinAttributes['class:list']
  loading?: 'eager' | 'lazy'
  priority?: 'high' | 'low' | 'auto'
  decoding?: 'async' | 'sync' | 'auto'
  fit?: keyof typeof fits
  [name: string]: unknown
}

const fits = {
  'cover': 'object-cover',
  'container': 'object-contain'
}

const {
  src,
  alt,
  width,
  height,
  fit = 'cover',
  as: Tag = 'div',
  class: className,
  'class:list': classList,
  loading = 'lazy',
  priority = 'auto',
  decoding = 'async',
  ...rest
} = Astro.props as Props
---

<Tag class:list={['relative', className, classList]} {...rest}>
  <svg viewBox={`0 0 ${width} ${height}`}></svg>
  <img
    src={src}
    alt={alt}
    height={height}
    width={width}
    loading={loading}
    decoding={decoding}
    fetchpriority={priority}
    class:list={['absolute inset-0 h-full w-full', fits[fit]]}
  >
</Tag>
